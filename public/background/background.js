(()=>{function s(e){browser.notifications.create({type:"basic",iconUrl:browser.extension.getURL("icons/pomodoro-48.png"),title:"Pomodoro Timer",message:e})}var r=class{constructor(i){this.timeMinutes=i.minutes||0,this.timeSeconds=i.seconds||0,this.startMinutes=i.minutes||0,this.startSeconds=i.seconds||0,this.breakTimeMinutes=i.breakMinutes||0,this.breakTimeSeconds=i.breakSeconds||0,this.timerOn=i.timerOn||!1,this.interval=null,this.timerMode="work"}getTime(){return"".concat(this.timeMinutes,":").concat(this.timeSeconds<10?"0".concat(this.timeSeconds):this.timeSeconds)}startTimer(){console.log("startTimer"),!this.timerOn&&(this.timerOn=!0,this.interval=setInterval(()=>{this.timeSeconds>0&&this.timeSeconds--,this.timeSeconds===0&&(this.timeMinutes===0?(this.timerMode==="work"?(s("Break Time!"),this.timeMinutes=this.breakTimeMinutes,this.timeSeconds=this.breakTimeSeconds):(s("Work Time!"),this.timeMinutes=this.startMinutes,this.timeSeconds=this.startSeconds),this.timerMode=this.timerMode==="work"?"break":"work"):(this.timeMinutes--,this.timeSeconds=59))},1e3))}stopTimer(){console.log("stopTimer"),this.timerOn=!1,clearInterval(this.interval)}resetTimer(){console.log("resetTimer"),this.timeMinutes=this.startMinutes,this.timeSeconds=this.startSeconds,this.timerMode="work",this.stopTimer()}},t=new r({minutes:25,seconds:0});function o(){browser.storage.sync.get(["workTime","breakTime"]).then(e=>{t.startMinutes=e.workTime,t.timeMinutes=e.workTime,t.breakTimeMinutes=e.breakTime})}o();function m(e,i,n){e.type==="getTimer"?n({time:t.getTime()}):e.type==="startTimer"?t.startTimer():e.type==="stopTimer"?t.stopTimer():e.type==="resetTimer"?t.resetTimer():e.type==="updateTime"&&(t.startMinutes=e.minutes,t.startSeconds=0,t.timeMinutes=e.minutes,t.timeSeconds=0,t.resetTimer())}browser.runtime.onMessage.addListener(m);})();
